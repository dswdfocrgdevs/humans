{% extends 'layout.html' %}
{% block content %}
<link rel="stylesheet" href="{% static 'assets/plugins/custom/prismjs/prismjs.bundle.css' %}" />
<link rel="stylesheet" href="{% static 'assets/plugins/custom/datatables/datatables.bundle.css' %}" />
<link rel="stylesheet" href="{% static 'assets/plugins/global/plugins.bundle.css' %}" />
<link rel="stylesheet" href="{% static 'assets/css/style.bundle.css' %}" />


<table id="hired-table" class="table table-striped table-row-bordered gy-5 gs-7 border rounded">
    <thead>
        <th class="text-center">Action</th>
        <th class="text-center">Check</th>
        <th class="text-center display-none">APP ID</th>
        <th class="text-center display-none">EMPSTATUS ID</th>
        <th class="text-center">FullName</th>
        <th class="text-center">Position</th>
        <th class="text-center">Former Incumbent</th>
        <th class="text-center">Basic <br> Monthly Sary</th>
        <th class="text-center">Effectivity of Contract</th>
        <th class="text-center">End of Contract</th>
        <th class="text-center">Status of Employment</th>
        <th class="text-center">Nature</th>
        <th class="text-center">Area of Assignment</th>
        <th class="text-center">Is Requirements Ok</th>
        <th class="text-center">Remarks</th>
    </thead>
    <tbody>
        <!-- Data will be inserted here dynamically -->
    </tbody>
</table>





{% endblock content %}

{% block script %}




<script type="text/javascript">

    $(document).ready(function () {
        // Initialize DataTable
        var table = $("#hired-table").DataTable({
            "language": {
                "lengthMenu": "Show _MENU_ entries",
                "search": "Search:",
                "paginate": {
                    "previous": "Previous",
                    "next": "Next"
                }
            },
            "dom": "<'row mb-2'" +
                "<'col-sm-6 d-flex align-items-center justify-content-start dt-toolbar'l>" +
                "<'col-sm-6 d-flex align-items-center justify-content-end dt-toolbar'f>" +
                ">" +
                "<'table-responsive'tr>" +
                "<'row'" +
                "<'col-sm-12 col-md-5 d-flex align-items-center justify-content-center justify-content-md-start'i>" +
                "<'col-sm-12 col-md-7 d-flex align-items-center justify-content-center justify-content-md-end'p>" +
                ">",
            "processing": true, 
            "serverSide": true, 
            "ajax": {
                url: "{% url 'rsp:list-newly-hired-staff' %}",
                type: 'GET',
                dataSrc: function (json) {
                    return json.results.map(function (item) {
                        return {
                            "action": "<button class='btn btn-sm btn-info'>Details</button>", 
                            "check": "<input type='checkbox' />",
                            "app_id": item.app_id,
                            "emp_status_id": item.emp_status_id,
                            "full_name": item.full_name,
                            "position": item.position,
                            "former_incumbent": item.former_incumbent || "N/A",
                            "salary": item.salary,
                            "effectivity_of_contract": item.effectivity_of_contract,
                            "end_of_contract": item.end_of_contract,
                            "status_of_employment": item.emp_status,
                            "nature": item.nature,
                            "area_of_assignment": item.area_of_assignment,
                            "requirements_ok": item.requirements_ok,
                            "remarks": item.remarks
                        };
                    });
                }
            },
            "columns": [
                { "data": "action", "className": "text-center" },
                { "data": "check", "className": "text-center" },
                { "data": "app_id", "className": "text-center display-none" },
                { "data": "emp_status_id", "className": "text-center display-none" },
                { "data": "full_name", "className": "text-center" },
                { "data": "position", "className": "text-center" },
                { "data": "former_incumbent", "className": "text-center" },
                { "data": "salary", "className": "text-center" },
                { "data": "effectivity_of_contract", "className": "text-center" },
                { "data": "end_of_contract", "className": "text-center" },
                { "data": "status_of_employment", "className": "text-center" },
                { "data": "nature", "className": "text-center" },
                { "data": "area_of_assignment", "className": "text-center" },
                { "data": "requirements_ok", "className": "text-center" },
                { "data": "remarks", "className": "text-center" }
            ]
        });
   
   });
</script>
{% endblock script %}